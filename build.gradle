plugins {
  id 'java'
  id 'war'
}

group = 'ro.ulbs.canteen'
version = '1.0-SNAPSHOT'
sourceCompatibility = '17'
targetCompatibility = '17'

repositories {
  mavenCentral()
}

dependencies {
  // Jakarta EE 10 API (provided by GlassFish)
  providedCompile 'jakarta.platform:jakarta.jakartaee-api:10.0.0'

  // MySQL connector
  runtimeOnly 'com.mysql:mysql-connector-j:8.2.0'

  // Test dependencies
  testImplementation 'org.junit.jupiter:junit-jupiter:5.10.1'
  testImplementation 'org.mockito:mockito-junit-jupiter:5.14.2'
  testImplementation 'de.hilling.junit.cdi:cdi-test-core:4.3.0'
  testImplementation 'de.hilling.junit.cdi:cdi-test-jee:4.3.0'
  testRuntimeOnly 'org.hibernate:hibernate-core-jakarta:5.6.15.Final'
  testRuntimeOnly 'com.h2database:h2:2.3.232'
}

sourceSets {
  test {
    resources {
      srcDirs = ['src/test/resources']
    }
  }
}

test {
  useJUnitPlatform()
}

war {
  archiveFileName = 'canteen.war'
}
